@tailwind base;
@tailwind components;
@tailwind utilities;

/* 5-color tokens (RGB channels) */
:root {
  --color-bg: 255 255 255;   /* #ffffff */
  --color-fg: 38 41 46;      /* #26292e */

  --color-primary: 122 114 233; /* #7a72e9 */
  --color-accent1: 156 175 136; /* #9caf88 */
  --color-accent2: 198 207 19;  /* #c6cf13 */
  --color-dark: 38 41 46;       /* #26292e */

  /* 4px-based radii baseline */
  --radius-1: 8px;
  --radius-2: 12px;
  --radius-3: 16px;
  --radius-4: 20px;
  --radius-5: 24px;

  color-scheme: light;
}

.dark {
  --color-bg: 38 41 46;   /* dark background */
  --color-fg: 255 255 255;

  color-scheme: dark;
}

html, body {
  height: 100%;
}

body {
  background: rgb(var(--color-bg));
  color: rgb(var(--color-fg));
  font-family: Garet, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
}

/* Glass primitives */
.glass {
  background: rgb(var(--color-bg) / 0.60);
  border: 1px solid rgb(var(--color-fg) / 0.10);
  backdrop-filter: blur(18px);
  -webkit-backdrop-filter: blur(18px);
}

.glass-strong {
  background: rgb(var(--color-bg) / 0.75);
  border: 1px solid rgb(var(--color-fg) / 0.12);
  backdrop-filter: blur(22px);
  -webkit-backdrop-filter: blur(22px);
}

/* subtle dynamic border illusion (allowed: opacity only) */
.glass-border {
  box-shadow:
    0 0 0 1px rgb(var(--color-fg) / 0.08) inset,
    0 1px 0 0 rgb(var(--color-bg) / 0.35) inset;
}

/* focus ring */
.focus-ring:focus-visible {
  outline: none;
  box-shadow: 0 0 0 2px rgb(var(--color-primary) / 0.45);
}

@layer components {
  :root {
    /* толщина обводки */
    --glass-stroke: 1px;

    /* “динамичный” градиент обводки */
    --glass-border-hi: rgba(255, 255, 255, 0.62);
    --glass-border-mid: rgba(255, 255, 255, 0.18);
    --glass-border-lo: rgba(0, 0, 0, 0.14);

    /* лёгкий внутренний блик (не второй бордюр) */
    --glass-inset: rgba(255, 255, 255, 0.22);

    /* blur для стекла (если используешь glass-surface) */
    --glass-blur: 18px;
  }

  /* если у тебя тёмная тема через .dark на html/body */
  .dark {
    --glass-border-hi: rgba(255, 255, 255, 0.55);
    --glass-border-mid: rgba(255, 255, 255, 0.14);
    --glass-border-lo: rgba(0, 0, 0, 0.22);
    --glass-inset: rgba(255, 255, 255, 0.16);
  }

/* Универсальный стекло-бордюр: НЕ трогает background элемента */
.glass-border {
  position: relative;
  box-shadow:
    inset 0 1px 0 rgba(255, 255, 255, 0.35),
    inset 0 -1px 0 rgba(0, 0, 0, 0.04);
}

.glass-border::before {
  content: "";
  position: absolute;
  inset: 0;
  border-radius: inherit;
  padding: 1px; /* толщина бордюра */

  /* один динамичный контур (бело-серый) */
  background: linear-gradient(
    135deg,
    rgba(255, 255, 255, 0.65),
    rgba(255, 255, 255, 0.18)
  );

  /* делаем “дырку” внутри, чтобы остался только бордюр */
  -webkit-mask: linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0);
  -webkit-mask-composite: xor;
  mask-composite: exclude;

  pointer-events: none;
}

  /*
    Фоллбек на случай, если маски не поддерживаются.
    Будет не такой “живой”, но без дубля.
  */
  @supports not ((-webkit-mask-composite: xor) or (mask-composite: exclude)) {
    .glass-border {
      border: 1px solid rgba(255, 255, 255, 0.28);
    }
    .glass-border::before {
      content: none;
    }
  }

  /* Опционально: “стеклянная поверхность” (если нужен именно glass фон) */
  .glass-surface {
    backdrop-filter: blur(var(--glass-blur));
    -webkit-backdrop-filter: blur(var(--glass-blur));
    background: rgba(255, 255, 255, 0.10);
  }
}

/* Общая пилюля каталога+поиска */
.header-dock {
  --glass-fill: #9caf88; /* 100% */
}

/* Поиск */
.header-search {
  --glass-fill: rgb(255 255 255 / 0.95);
}

/* Иконки справа */
.header-icon {
  --glass-fill: rgb(255 255 255 / 0.95);
}

.header-icon--accent {
  --glass-fill: #9caf88; /* 100% */
}

/* Dark theme: фон темнеет, элементы остаются стеклянными */
html.dark .header-dock {
  background: rgb(var(--color-accent1) / 0.28);
  border-color: rgb(255 255 255 / 0.14);
}

html.dark .header-search {
  background: rgb(var(--color-dark) / 0.22);
  border-color: rgb(var(--color-accent1) / 0.45);
}

html.dark .header-icon {
  background: rgb(var(--color-dark) / 0.18);
  border-color: rgb(255 255 255 / 0.14);
}

@layer components {
  /* Универсальный hover для текста: плавная смена цвета */
  .ui-hover-accent2 {
    transition-property: color;
    transition-duration: 700ms;
    transition-timing-function: cubic-bezier(0.22, 1, 0.36, 1); /* мягко и премиально */
  }

  .ui-hover-accent2:hover {
    color: #c6cf13;
  }
  
  .ui-hover-accent1 {
    transition-property: color;
    transition-duration: 700ms;
    transition-timing-function: cubic-bezier(0.22, 1, 0.36, 1); /* мягко и премиально */
  }

  .ui-hover-accent1:hover {
    color: #9caf88;
  }  
  
  /* Универсальный hover для иконок: плавная смена цвета */
  .ui-icon-hover-accent1 {
    color: #26292e; /* базовый */
    transition-property: color;
    transition-duration: 700ms;
    transition-timing-function: cubic-bezier(0.22, 1, 0.36, 1);
  }

  .ui-icon-hover-accent1:hover {
    color: #9caf88; /* accent1 */
  }
  
    .ui-press {
    transition-property: transform;
    transition-duration: 180ms;
    transition-timing-function: cubic-bezier(0.2, 0.9, 0.2, 1);
  }
  
  .ui-press:active {
    transform: translateY(1px);
  }
    .ui-focus-glass {
    transition:
      box-shadow 800ms cubic-bezier(0.22, 1, 0.36, 1),
      transform 650ms cubic-bezier(0.22, 1, 0.36, 1),
      background-color 800ms cubic-bezier(0.22, 1, 0.36, 1);
  }

  /* когда внутри есть фокус */
  .ui-focus-glass:focus-within {
    transform: translateY(-0.5px);
    box-shadow:
      0 0 0 1px rgba(255, 255, 255, 0.75),   /* тонкий “стеклянный” контур */
      0 10px 26px rgba(0, 0, 0, 0.08);      /* мягкая глубина */
  }

  /* небольшая “обратная связь” при клике */
  .ui-focus-glass:active {
    transform: translateY(0px);
  }

  .ui-search-icon {
    transition: color 650ms cubic-bezier(0.22, 1, 0.36, 1);
    color: #9caf88; /* можно базово так оставить */
  }
  .ui-search-wrap:focus-within .ui-search-icon {
    color: #7a72e9; /* либо accent2 #c6cf13, если хочешь “искру” */
  }
}

