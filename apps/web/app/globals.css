@tailwind base;
@tailwind components;
@tailwind utilities;

/* 5-color tokens (RGB channels) */
:root {
  --color-bg: 255 255 255;   /* #ffffff */
  --color-fg: 38 41 46;      /* #26292e */

  --color-primary: 122 114 233; /* #7a72e9 */
  --color-accent1: 156 175 136; /* #9caf88 */
  --color-accent2: 198 207 19;  /* #c6cf13 */
  --color-dark: 38 41 46;       /* #26292e */

  /* 4px-based radii baseline */
  --radius-1: 8px;
  --radius-2: 12px;
  --radius-3: 16px;
  --radius-4: 20px;
  --radius-5: 24px;

  color-scheme: light;
}

.dark {
  --color-bg: 38 41 46;   /* dark background */
  --color-fg: 255 255 255;

  color-scheme: dark;
}

html, body {
  height: 100%;
}

body {
  background: rgb(var(--color-bg));
  color: rgb(var(--color-fg));
  font-family: Garet, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
}

/* Glass primitives */
.glass {
  background: rgb(var(--color-bg) / 0.60);
  border: 1px solid rgb(var(--color-fg) / 0.10);
  backdrop-filter: blur(18px);
  -webkit-backdrop-filter: blur(18px);
}

.glass-strong {
  background: rgb(var(--color-bg) / 0.75);
  border: 1px solid rgb(var(--color-fg) / 0.12);
  backdrop-filter: blur(22px);
  -webkit-backdrop-filter: blur(22px);
}

/* subtle dynamic border illusion (allowed: opacity only) */
.glass-border {
  box-shadow:
    0 0 0 1px rgb(var(--color-fg) / 0.08) inset,
    0 1px 0 0 rgb(var(--color-bg) / 0.35) inset;
}

/* focus ring */
.focus-ring:focus-visible {
  outline: none;
  box-shadow: 0 0 0 2px rgb(var(--color-primary) / 0.45);
}

@layer components {
  :root {
    /* толщина обводки */
    --glass-stroke: 1px;

    /* “динамичный” градиент обводки */
    --glass-border-hi: rgba(255, 255, 255, 0.62);
    --glass-border-mid: rgba(255, 255, 255, 0.18);
    --glass-border-lo: rgba(0, 0, 0, 0.14);

    /* лёгкий внутренний блик (не второй бордюр) */
    --glass-inset: rgba(255, 255, 255, 0.22);

    /* blur для стекла (если используешь glass-surface) */
    --glass-blur: 18px;
  }

  /* если у тебя тёмная тема через .dark на html/body */
  .dark {
    --glass-border-hi: rgba(255, 255, 255, 0.55);
    --glass-border-mid: rgba(255, 255, 255, 0.14);
    --glass-border-lo: rgba(0, 0, 0, 0.22);
    --glass-inset: rgba(255, 255, 255, 0.16);
  }

/* Универсальный стекло-бордюр: НЕ трогает background элемента */
.glass-border {
  position: relative;
  box-shadow:
    inset 0 1px 0 rgba(255, 255, 255, 0.35),
    inset 0 -1px 0 rgba(0, 0, 0, 0.04);
}

.glass-border::before {
  content: "";
  position: absolute;
  inset: 0;
  border-radius: inherit;
  padding: 1px; /* толщина бордюра */

  /* один динамичный контур (бело-серый) */
  background: linear-gradient(
    135deg,
    rgba(255, 255, 255, 0.65),
    rgba(255, 255, 255, 0.18)
  );

  /* делаем “дырку” внутри, чтобы остался только бордюр */
  -webkit-mask: linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0);
  -webkit-mask-composite: xor;
  mask-composite: exclude;

  pointer-events: none;
}

  /*
    Фоллбек на случай, если маски не поддерживаются.
    Будет не такой “живой”, но без дубля.
  */
  @supports not ((-webkit-mask-composite: xor) or (mask-composite: exclude)) {
    .glass-border {
      border: 1px solid rgba(255, 255, 255, 0.28);
    }
    .glass-border::before {
      content: none;
    }
  }

  /* Опционально: “стеклянная поверхность” (если нужен именно glass фон) */
  .glass-surface {
    backdrop-filter: blur(var(--glass-blur));
    -webkit-backdrop-filter: blur(var(--glass-blur));
    background: rgba(255, 255, 255, 0.10);
  }
}

/* Общая пилюля каталога+поиска */
.header-dock {
  --glass-fill: #9caf88; /* 100% */
}

/* Поиск */
.header-search {
  --glass-fill: rgb(255 255 255 / 0.95);
}

/* Иконки справа */
.header-icon {
  --glass-fill: rgb(255 255 255 / 0.95);
}

.header-icon--accent {
  --glass-fill: #9caf88; /* 100% */
}

/* Dark theme: фон темнеет, элементы остаются стеклянными */
html.dark .header-dock {
  background: rgb(var(--color-accent1) / 0.28);
  border-color: rgb(255 255 255 / 0.14);
}

html.dark .header-search {
  background: rgb(var(--color-dark) / 0.22);
  border-color: rgb(var(--color-accent1) / 0.45);
}

html.dark .header-icon {
  background: rgb(var(--color-dark) / 0.18);
  border-color: rgb(255 255 255 / 0.14);
}

@layer components {
  /* Универсальный hover для текста: плавная смена цвета */
  .ui-hover-accent2 {
    transition-property: color;
    transition-duration: 700ms;
    transition-timing-function: cubic-bezier(0.22, 1, 0.36, 1); /* мягко и премиально */
  }

  .ui-hover-accent2:hover {
    color: #c6cf13;
  }
  
  .ui-hover-accent1 {
    transition-property: color;
    transition-duration: 700ms;
    transition-timing-function: cubic-bezier(0.22, 1, 0.36, 1); /* мягко и премиально */
  }

  .ui-hover-accent1:hover {
    color: #9caf88;
  }  
  
  /* Универсальный hover для иконок: плавная смена цвета */
  .ui-icon-hover-accent1 {
    color: #26292e; /* базовый */
    transition-property: color;
    transition-duration: 700ms;
    transition-timing-function: cubic-bezier(0.22, 1, 0.36, 1);
  }

  .ui-icon-hover-accent1:hover {
    color: #9caf88; /* accent1 */
  }
  
    .ui-press {
    transition-property: transform;
    transition-duration: 180ms;
    transition-timing-function: cubic-bezier(0.2, 0.9, 0.2, 1);
  }
  
  .ui-press:active {
    transform: translateY(1px);
  }
    .ui-focus-glass {
    transition:
      box-shadow 800ms cubic-bezier(0.22, 1, 0.36, 1),
      transform 650ms cubic-bezier(0.22, 1, 0.36, 1),
      background-color 800ms cubic-bezier(0.22, 1, 0.36, 1);
  }

  /* когда внутри есть фокус */
  .ui-focus-glass:focus-within {
    transform: translateY(-0.5px);
    box-shadow:
      0 0 0 1px rgba(255, 255, 255, 0.75),   /* тонкий “стеклянный” контур */
      0 10px 26px rgba(0, 0, 0, 0.08);      /* мягкая глубина */
  }

  /* небольшая “обратная связь” при клике */
  .ui-focus-glass:active {
    transform: translateY(0px);
  }

  .ui-search-icon {
    transition: color 650ms cubic-bezier(0.22, 1, 0.36, 1);
    color: #9caf88; /* можно базово так оставить */
  }
  .ui-search-wrap:focus-within .ui-search-icon {
    color: #7a72e9; /* либо accent2 #c6cf13, если хочешь “искру” */
  }
}

/* Маска баннера с выемками (1в1 по референсу) */
.banner-notch {
  --banner-notch-mask: url("data:image/svg+xml,%3Csvg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%201368%20356%22%20preserveAspectRatio=%22none%22%3E%3Cpath%20d=%22M%201343.50%20356.00%20L%2024.50%20356.00%20L%2023.50%20355.00%20L%2017.50%20354.00%20L%2013.50%20352.00%20L%209.50%20348.00%20L%208.50%20348.00%20L%208.00%20346.50%20L%204.00%20342.50%20L%201.00%20336.50%20L%201.00%20334.50%20L%200.00%20333.50%20L%200.00%20214.50%20L%202.00%20210.50%20L%206.50%20206.00%20L%2014.50%20203.00%20L%2021.00%20196.50%20L%2023.00%20192.50%20L%2023.00%20163.50%20L%2021.00%20159.50%20L%2014.50%20153.00%20L%2010.50%20151.00%20L%208.50%20151.00%20L%206.50%20149.00%20L%205.50%20149.00%20L%202.00%20145.50%20L%200.00%20141.50%20L%200.00%2022.50%20L%201.00%2021.50%20L%201.00%2019.50%20L%204.00%2013.50%20L%209.50%207.00%20L%2010.50%207.00%20L%2013.50%204.00%20L%2017.50%202.00%20L%2023.50%201.00%20L%2024.50%200.00%20L%201343.50%200.00%20L%201344.50%201.00%20L%201350.50%202.00%20L%201354.50%204.00%20L%201358.50%208.00%20L%201359.50%208.00%20L%201360.00%209.50%20L%201364.00%2013.50%20L%201367.00%2019.50%20L%201367.00%2021.50%20L%201368.00%2022.50%20L%201368.00%20140.50%20L%201367.00%20141.50%20L%201367.00%20143.50%20L%201362.50%20149.00%20L%201351.50%20154.00%20L%201348.00%20157.50%20L%201347.00%20160.50%20L%201345.00%20162.50%20L%201345.00%20165.50%20L%201344.00%20166.50%20L%201344.00%20189.50%20L%201345.00%20190.50%20L%201346.00%20195.50%20L%201351.50%20202.00%20L%201357.50%20205.00%20L%201359.50%20205.00%20L%201361.50%20207.00%20L%201362.50%20207.00%20L%201367.00%20212.50%20L%201367.00%20214.50%20L%201368.00%20215.50%20L%201368.00%20333.50%20L%201367.00%20334.50%20L%201367.00%20336.50%20L%201364.00%20342.50%20L%201358.50%20349.00%20L%201357.50%20349.00%20L%201354.50%20352.00%20L%201350.50%20354.00%20L%201344.50%20355.00%20L%201343.50%20356.00%20Z%22%20fill=%22white%22/%3E%3C/svg%3E");

  -webkit-mask-image: var(--banner-notch-mask);
  mask-image: var(--banner-notch-mask);

  -webkit-mask-size: 100% 100%;
  mask-size: 100% 100%;

  -webkit-mask-repeat: no-repeat;
  mask-repeat: no-repeat;

  -webkit-mask-position: center;
  mask-position: center;
}
